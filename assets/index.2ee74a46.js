import{r as L,o as c,c as l,a as n,b as C,w as x,p as O,d as A,e as T,u as Q,f as I,g as q,F as g,h as k,n as P,i as v,t as d,j as N,v as j,k as z,l as D,m as E,q as $,s as R,x as F,y as H,z as V,A as B,B as G,C as K}from"./vendor.db8b8171.js";const J=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const _ of i.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&r(_)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}};J();var w=(e,t)=>{const s=e.__vccOpts||e;for(const[r,o]of t)s[r]=o;return s};const X={},Y=e=>(O("data-v-456e5dfe"),e=e(),A(),e),W={class:"vertical-layout"},Z=Y(()=>n("h1",null,"Trivia",-1)),ee=T(" Temporary route links: "),te=T("Start"),se=T("Question"),ne=T("Result"),oe={class:"middle"};function re(e,t){const s=L("router-link"),r=L("router-view");return c(),l("div",W,[n("header",null,[Z,ee,C(s,{to:"/"},{default:x(()=>[te]),_:1}),C(s,{to:"/question"},{default:x(()=>[se]),_:1}),C(s,{to:"/result"},{default:x(()=>[ne]),_:1})]),n("main",oe,[C(r)])])}var ie=w(X,[["render",re],["__scopeId","data-v-456e5dfe"]]);const M=e=>(O("data-v-8f833620"),e=e(),A(),e),ue={class:"root"},ce=M(()=>n("h2",null,"Trivia",-1)),ae=["onClick"],le={class:"width-100"},de=["onClick"],he=["value"],_e=M(()=>n("br",null,null,-1)),pe={class:"width-100"},me={setup(e){const t=Q(),s=I(),r={any:"Any Category",9:"General Knowledge",10:"Entertainment: Books",11:"Entertainment: Film",12:"Entertainment: Music",13:"Entertainment: Musicals & Theatres",14:"Entertainment: Television",15:"Entertainment: Video Games",16:"Entertainment: Board Games",17:"Science & Nature",18:"Science: Computers",19:"Science: Mathematics",20:"Mythology",21:"Sports",22:"Geography",23:"History",24:"Politics",25:"Art",26:"Celebrities",27:"Animals",28:"Vehicles",29:"Entertainment: Comics",30:"Science: Gadgets",31:"Entertainment: Japanese Anime & Manga",32:"Entertainment: Cartoon & Animations"},o={easy:{name:"Easy",color:"green"},medium:{name:"Medium",color:"yellow"},hard:{name:"Hard",color:"red"}},i=q(t.getters.getQuestionCategory),_=q(t.getters.getUsername),h=()=>{t.commit("setUsername",_),t.commit("setQuestionCategory",i),t.dispatch("fetchApiSessionToken"),t.dispatch("resetQuiz"),s.push({name:"question"})};return(b,S)=>(c(),l("div",ue,[ce,n("div",null,[(c(),l(g,null,k(o,(p,m)=>n("button",{key:m,class:"button",style:P("background-color: "+p.color),onClick:U=>v(t).commit("setQuestionDifficulty",m)},d(p.name),13,ae)),64))]),n("div",le,[(c(),l(g,null,k([5,10,15,20,25],p=>n("button",{class:"button",key:p,onClick:m=>v(t).commit("setQuestionsSelected",p)},d(p),9,de)),64))]),N(n("select",{class:"input","onUpdate:modelValue":S[0]||(S[0]=p=>i.value=p)},[(c(),l(g,null,k(r,(p,m)=>n("option",{key:m,value:m},d(p),9,he)),64))],512),[[j,i.value]]),_e,n("div",pe,[N(n("input",{class:"input","onUpdate:modelValue":S[1]||(S[1]=p=>_.value=p),type:"text",placeholder:"Username"},null,512),[[z,_.value]]),n("button",{class:"button",type:"button",onClick:h},"Start")])]))}};var fe=w(me,[["__scopeId","data-v-8f833620"]]);const ge=n("h1",null,"Start",-1),ve={setup(e){return(t,s)=>(c(),l(g,null,[ge,C(fe)],64))}},ye={},qe=n("h1",null,"404",-1),we=n("p",null,"Not found",-1);function Se(e,t){return c(),l(g,null,[qe,we],64)}var Ce=w(ye,[["render",Se]]);const be={class:"question-area"},Qe={class:"question-title"},ke={class:"question-x-of-y"},$e={class:"button-area"},Te={props:{question:{type:Object,required:!0}},setup(e){const t=e,s=Q(),r=I(),o=q(s.getters.getNumberOfQuestions),i=q("True"),_=q("False"),h=q("Choice 3"),b=q("Choice 4"),S=()=>{const a=[];a.push(t.question.correct_answer),a.push(t.question.incorrect_answers[0]),a.push(t.question.incorrect_answers[1]),a.push(t.question.incorrect_answers[2]);const u=p(a);i.value=u[0],_.value=u[1],h.value=u[2],b.value=u[3],console.log("Coices randomized")},p=a=>{let u=a.length,y;for(;u!=0;)y=Math.floor(Math.random()*u),u--,[a[u],a[y]]=[a[y],a[u]];return a},m=a=>{s.commit("submitAnswer",{question:t.question.question,correct_answer:t.question.correct_answer,answer:a,number:t.question.number}),s.commit("hideCurrentQuestion"),U()},U=()=>{s.commit("increaseIndexOfCurrentQuestion");const a=s.getters.getIndexOfCurrentQuestion,u=s.getters.getNumberOfQuestions;a<u?s.commit("showCurrentQuestion"):s.dispatch("submitScore").then(()=>r.push({name:"result"}))};return D(()=>{s.commit("setNumberOfQuestions"),o.value=s.getters.getNumberOfQuestions,t.question.type==="multiple"&&S()}),(a,u)=>(c(),l(g,null,[n("div",be,[n("h2",Qe,d(e.question.question),1),n("p",ke,"Question: "+d(e.question.number)+"/"+d(o.value),1)]),n("div",$e,[n("button",{class:"choice choice1",onClick:u[0]||(u[0]=y=>m(i.value))},d(i.value),1),n("button",{class:"choice choice2",onClick:u[1]||(u[1]=y=>m(_.value))},d(_.value),1),e.question.type==="multiple"?(c(),l("button",{key:0,class:"choice choice3",onClick:u[2]||(u[2]=y=>m(h.value))},d(h.value),1)):E("",!0),e.question.type==="multiple"?(c(),l("button",{key:1,class:"choice choice4",onClick:u[3]||(u[3]=y=>m(b.value))},d(b.value),1)):E("",!0)])],64))}};var xe=w(Te,[["__scopeId","data-v-3abae0c4"]]);const Oe=n("h1",null,"Question",-1),Ae={setup(e){const t=Q(),s=$(()=>t.state.questions);return(r,o)=>(c(),l(g,null,[Oe,(c(!0),l(g,null,k(v(s),i=>(c(),l("div",{key:i.question},[i.show_question?(c(),R(xe,{key:0,question:i},null,8,["question"])):E("",!0)]))),128))],64))}};const Ie={class:"textfield question-number"},Ee={class:"textfield question"},Ue={class:"textfield user-answer"},Le={class:"textfield answer"},Ne={props:{question:{type:Object,required:!0},answer:{type:Object,required:!0},questionIndex:{type:Number,required:!0}},setup(e){const t=e,s=$(()=>t.answer.correct_answer===t.answer.answer);return(r,o)=>(c(),l("li",{class:F(v(s)?"correct-answer":"wrong-answer")},[n("p",Ie,d(e.questionIndex+1),1),n("p",Ee,d(e.question.question),1),n("p",Ue,"Your answer: "+d(e.answer.answer),1),n("p",Le,"Correct answer: "+d(e.answer.correct_answer),1)],2))}};var Re=w(Ne,[["__scopeId","data-v-46b572c6"]]);const Me={setup(e){const t=Q(),s=$(()=>t.state.questions),r=$(()=>t.state.answers);return(o,i)=>(c(),l("ol",null,[(c(!0),l(g,null,k(v(s),(_,h)=>(c(),R(Re,{key:h,questionIndex:h,question:_,answer:v(r)[h]},null,8,["questionIndex","question","answer"]))),128))]))}};var Pe=w(Me,[["__scopeId","data-v-be674b14"]]);const je=e=>(O("data-v-755eed5f"),e=e(),A(),e),ze={class:"container"},De=je(()=>n("h2",null,"Results",-1)),Fe={class:"final-score"},He={setup(e){const t=Q(),s=I(),r=$(()=>t.state.questions);let o=H({highScore:0,localScore:t.getters.getLocalScore});const i=()=>{s.push({name:"start"})},_=()=>{s.push({name:"question"}).then(()=>t.dispatch("resetQuiz")).catch(h=>console.log("Error on playAgainClicked! Error: ",h))};return t.dispatch("fetchHighscore").then(h=>Math.max(h,o.localScore)).then(h=>o.highScore=h),(h,b)=>(c(),l("section",ze,[De,n("p",Fe,"Final score: "+d(v(o).localScore)+"/"+d(v(r).length*10)+" - High score: "+d(v(o).highScore),1),C(Pe),n("div",{class:"buttons"},[n("button",{onClick:i},"Home"),n("button",{onClick:_},"Play again")])]))}};var Ve=w(He,[["__scopeId","data-v-755eed5f"]]);const Be=[{name:"start",path:"/",component:ve},{name:"question",path:"/question",component:Ae},{name:"result",path:"/result",component:Ve},{name:"not-found",path:"/:catchAll(.*)",component:Ce}];var Ge=V({history:B({}.VITE_BASE_PUBLIC_PATH),routes:Be});const f=G({state:{username:"",questionsSelected:10,questionDifficulty:"any",questionType:"any",questionCategory:"any",apiUrlPath:"https://opentdb.com/api.php",triviaURL:"https://jorgsaa-noroff-assignment-api.herokuapp.com/trivia",triviaToken:"uEzYwhrkm0OmaPQRfHSqz2OsKL8nsxK3AiqVkJkPjCv2lbiLnDyDkzOCGMm1A1gG",apiSessionToken:"",questions:[],indexOfCurrentQuestion:0,numberOfQuestions:0,answers:[]},mutations:{setUsername:(e,t)=>{e.username=t},setQuestionsSelected:(e,t)=>{e.questionsSelected=t},setQuestionDifficulty:(e,t)=>{e.questionDifficulty=t},setQuestionType:(e,t)=>{e.questionType=t},setQuestionCategory:(e,t)=>{e.questionCategory=t},setQuestions:(e,t)=>{e.questions=t},setIndexOfCurrentQuestion:(e,t)=>{e.indexOfCurrentQuestion=t},setNumberOfQuestions:e=>{e.numberOfQuestions=e.questions.length},addQuestion:(e,t)=>{e.questions.push(t)},deleteQuestion:(e,t)=>{const s=e.questions.indexOf(t);e.questions.splice(s,1)},emptyQuestions:e=>{e.questions.length=0},submitAnswer:(e,t)=>{e.answers.push(t)},deleteAnswer:(e,t)=>{const s=e.answers.indexOf(t);e.answers.splice(s,1)},emptyAnswers:e=>{e.answers.length=0},setApiSessionToken:(e,t)=>{e.apiSessionToken=t},increaseIndexOfCurrentQuestion:e=>{e.indexOfCurrentQuestion++},showCurrentQuestion:e=>{f.state.questions[e.indexOfCurrentQuestion].show_question=!0},hideCurrentQuestion:e=>{f.state.questions[e.indexOfCurrentQuestion].show_question=!1}},getters:{getUsername:e=>e.username,getQuestionsSelected:e=>e.questionsSelected,getQuestionDifficulty:e=>e.questionDifficulty,getQuestionType:e=>e.questionType,getQuestionCategory:e=>e.questionCategory,getApiUrl:e=>e.apiUrlPath+`?&amount=${e.questionsSelected}`+(e.questionCategory!=="any"?`&category=${e.questionCategory}`:"")+(e.questionDifficulty!=="any"?`&difficulty=${e.questionDifficulty}`:"")+(e.questionType!=="any"?`&type=${e.questionType}`:"")+(e.apiSessionToken.length!=0?`&token=${e.apiSessionToken}`:""),getTriviaURL:e=>e.triviaURL,getTriviaToken:e=>e.triviaToken,getApiSessionToken:e=>e.apiSessionToken,getNumberOfQuestions:e=>e.numberOfQuestions,getIndexOfCurrentQuestion:e=>e.indexOfCurrentQuestion,getLocalScore:e=>{const t=(s,r)=>s+(r.answer===r.correct_answer?10:0);return e.answers.reduce(t,0)}},actions:{fetchApiSessionToken(e){if(e.getters.getApiSessionToken.length===0)return fetch("https://opentdb.com/api_token.php?command=request").then(t=>t.json()).then(t=>{e.commit("setApiSessionToken",t.token)}).catch(t=>console.log("Failed to fetch api session token! Error: "+t))},fetchQuestions(e){return fetch(e.getters.getApiUrl).then(t=>t.json()).then(t=>{t.results.forEach((s,r)=>{r===0?(s.show_question=!0,s.number=(r+1).toString()):(s.show_question=!1,s.number=(r+1).toString())}),e.commit("setQuestions",t.results)}).catch(t=>console.log("Failed to fetch questions! Error: "+t))},resetQuiz(e){e.commit("emptyAnswers"),e.dispatch("fetchQuestions"),e.commit("setIndexOfCurrentQuestion",0)},fetchUsers(e){return fetch(`${f.getters.getTriviaURL}?username=${f.getters.getUsername}`).then(t=>t.json())},usernameExists(e){return f.dispatch("fetchUsers").then(t=>t.length!==0)},fetchHighscore(e){return f.dispatch("fetchUsers").then(t=>t[0]).then(t=>t.highScore)},submitScore(e){f.dispatch("usernameExists").then(t=>{if(t)f.dispatch("fetchUsers").then(s=>{const r=s[0];if(!(r.highScore>e.getters.getLocalScore))return fetch(`${f.getters.getTriviaURL}/${r.id}`,{method:"PATCH",headers:{"X-API-Key":e.getters.getTriviaToken,"Content-Type":"application/json"},body:JSON.stringify({highScore:e.getters.getLocalScore})}).catch(o=>console.log("Failed to update score! Error: "+o))});else return fetch(f.getters.getTriviaURL,{method:"POST",headers:{"X-API-Key":e.getters.getTriviaToken,"Content-Type":"application/json"},body:JSON.stringify({username:e.getters.getUsername,highScore:e.getters.getLocalScore})}).catch(s=>console.log("Failed to submit score! Error: "+s))})}}});K(ie).use(f).use(Ge).mount("#app");
